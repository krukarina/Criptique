WindowManager:
    GreetPage:
    LoginPage:
    RegisterPage:
    MainPage:
    AddPage:
    FetchPage:
    DeletePage:
    WrongLogPage:
    WrongRegPage:
    RegisteredGoodPage:
    DeleteGoodPage:
    AddDataGoodPage:
    DeleteWrongPage:
    FetchGoodPage:
    FetchBadPage:

<GreetPage>:
    name: "greet"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "Hello user!"
        RegularLabel:
            text: "Please log into your account OR register."
        ChangedButton:
            text: "Login"
            size_hint_y: 0.2
            on_release: app.root.current = "login"
        ChangedButton:
            text: "Register"
            size_hint_y: 0.2
            on_release: app.root.current = "reg"
<LoginPage>:
    name: "login"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        RegularLabel:
            text: "Please log into your account."
        RegularLabel:
            text: "Email"
        ChangedInput:
            multiline: False
            id: email
        RegularLabel:
            text: "Password"
        ChangedInput:
            multiline: False
            password: True
            id: password
        ChangedButton:
            text: "Login"
            size_hint_y: 0.5
            on_release:
                root.login()
<RegisterPage>:
    name: "reg"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        RegularLabel:
            text: "Please provide required information to register."
        RegularLabel:
            text: "Email"
        ChangedInput:
            multiline: False
            id: email
        RegularLabel:
            text: "Master password"
        ChangedInput:
            multiline: False
            password: True
            id: masterpwd
        ChangedButton:
            text: "Register"
            size_hint_y: 0.5
            on_release:
                root.add_to_signup_db()
<MainPage>:
    name: "main"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        RegularLabel:
            text: "Hey :)"
        RegularLabel:
            text: "What would you like to do today?"
        ChangedButton:
            text: "Add new"
            size_hint_y: 0.5
            on_release: app.root.current = "add"
        ChangedButton:
            text: "Delete"
            size_hint_y: 0.5
            on_release: app.root.current = "delete"
        ChangedButton:
            text: "Fetch"
            size_hint_y: 0.5
            on_release: app.root.current = "fetch"
        ChangedButton:
            text: "logout"
            size_hint_y: 0.5
            on_release: app.root.current = "greet"
<AddPage>
    name: "add"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        RegularLabel:
            text: "Please provide required information to add new data."
        RegularLabel:
            text: "App name"
        ChangedInput:
            multiline: False
            id: app_name
        RegularLabel:
            text: "Email"
        ChangedInput:
            multiline: False
            id: email
        RegularLabel:
            text: "Password"
        ChangedInput:
            multiline: False
            password: True
            id: password
        ChangedButton:
            text: "Add new data"
            size_hint_y: 0.5
            on_release:
                root.add_to_storage_db()

<AddDataGoodPage>
    name: "addgood"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "Data was encrypted and stored successfully."
        ChangedButton:
            text: "Return to the main page."
            size_hint_y: 0.2
            on_release: app.root.current = "main"

<WrongLogPage>
    name: "wronglog"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "OH NO! Email or master password are incorrect."
        RegularLabel:
            text: "Please return to the login page and try again."
        ChangedButton:
            text: "Return to login"
            size_hint_y: 0.2
            on_release: app.root.current = "login"
        RegularLabel:
            text: "OR"
        ChangedButton:
            text: "Create a new account"
            size_hint_y: 0.2
            on_release: app.root.current = "reg"
<WrongRegPage>
    name: "wrongreg"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "OH! The account with inserted email already exists!"
        RegularLabel:
            text: "Please try to signup with other email address, or login into your account."
        ChangedButton:
            text: "Return to signup page"
            size_hint_y: 0.2
            on_release: app.root.current = "reg"
        RegularLabel:
            text: "OR"
        ChangedButton:
            text: "Go to login page"
            size_hint_y: 0.2
            on_release: app.root.current = "login"

<RegisteredGoodPage>
    name: "reggood"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "Hurray! Your account was successfully created!"
        RegularLabel:
            text: "Go to the login page to start using Criptique."
        ChangedButton:
            text: "Login Page"
            size_hint_y: 0.2
            on_release: app.root.current = "login"

<DeletePage>
    name: "delete"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        RegularLabel:
            text: "What login credentials do you want to delete? Provide the app name in the text box."
        RegularLabel:
            text: "App name"
        ChangedInput:
            multiline: False
            id: app_name
        ChangedButton:
            text: "Delete data"
            size_hint_y: 0.5
            on_release:
                root.delete_data_from_database()

<DeleteGoodPage>
    name: "deletegood"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "Data was successfully deleted."
        ChangedButton:
            text: "Return to the main page"
            size_hint_y: 0.2
            on_release: app.root.current = "main"

<DeleteWrongPage>
    name: "deletewrong"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "Data cannot be deleted as it wasn't stored yet."
        RegularLabel:
            text: "Please, try again or return to the main page."
        ChangedButton:
            text: "Try again"
            size_hint_y: 0.2
            on_release: app.root.current = "delete"
        RegularLabel:
            text: "OR"
        ChangedButton:
            text: "Main page"
            size_hint_y: 0.2
            on_release: app.root.current = "main"

<FetchPage>
    name: "fetch"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        RegularLabel:
            text: "What password do you want to copy? Provide the app name in the text box."
        RegularLabel:
            text: "App name"
        ChangedInput:
            multiline: False
            id: app_name
        ChangedButton:
            text: "Fetch password"
            size_hint_y: 0.5
            on_release:
                root.fetch_from_db()

<FetchGoodPage>
    name: "fetchgood"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "The password was successfully copied to clipboard!"
        RegularLabel:
            text: "You can now login into your social media account."
        ChangedButton:
            text: "Main page"
            size_hint_y: 0.2
            on_release: app.root.current = "main"
        RegularLabel:
            text: "OR"
        ChangedButton:
            text: "Logout"
            size_hint_y: 0.2
            on_release: app.root.current = "greet"

<FetchBadPage>
    name: "fetchbad"
    BoxLayout:
        orientation: "vertical"
        padding: 50
        spacing: 20
        Label:
            text: "Cryptique"
            halign: "center"
            valign: "center"
            color: "#365b6d"
            font_size: "58sp"
            size_hint_y: 0.2
        RegularLabel:
            text: "The password cannot be copied! It looks like it is not stored."
        RegularLabel:
            text: "Try again or go logout."
        ChangedButton:
            text: "Try again"
            size_hint_y: 0.2
            on_release: app.root.current = "fetch"
        RegularLabel:
            text: "OR"
        ChangedButton:
            text: "Logout"
            size_hint_y: 0.2
            on_release: app.root.current = "greet"

<ChangedButton@Button>:
    background_normal: ''
    background_color: "#9BDCC2"
    color: "#365b6d"
    font_size: "25sp"
    size_hint:(0.7,0.15)
    pos_hint: {"center_x": 0.5}
    canvas.before:
        Color:
            rgba: (0.61, 0.86, 0.76, 1)
        Rectangle:
            size: self.size
            pos: self.pos

<ChangedInput@TextInput>:
    background_normal: ''
    background_color: '#ffffff'
    color: "#365b6d"
    font_size: "18sp"
    pos_hint: {"center_x": 0.5}
    size_hint:(0.6,0.15)
    multiline: False

<RegularLabel@Label>:
    color: "#365b6d"
    font_size: "22sp"
    size_hint_y: 0.25
    height: self.texture_size[1]
    text_size: self.width, None
    valign: 'middle'
    halign: 'center'